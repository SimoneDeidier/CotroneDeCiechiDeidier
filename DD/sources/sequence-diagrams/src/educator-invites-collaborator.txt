title Educator invites a collaborator

Logged educator->WebApplication:getTournamentPage
note over Logged educator: The procedure for reaching a\nspecific tournament page is specified\nin a previous sequence diagram
WebApplication-->Logged educator: tournament page
Logged educator->WebApplication: addCollaborator(tournamentID: int)
WebApplication->EducatorManager:addCollaborator(username: String, tournamentID: int
EducatorManager->TournamentManager:addCollaborator(username: String, tournamentID: int
TournamentManager->DatabaseService:addCollaborator(username: String, tournamentID: int
DatabaseService->DataBase:addCollaborator(username: String, tournamentID: int
DataBase-->DatabaseService: result: boolean, tournamentID: int
DatabaseService-->TournamentManager:result: boolean, tournamentID: int
TournamentManager-->EducatorManager:result: boolean, tournamentID: int
EducatorManager-->WebApplication:result: boolean, tournamentID: int
alt !result
WebApplication-->Logged educator:errorPage
else result
WebApplication-->Logged educator: new collaborator page
loop selected educator is already an admin || error while sending the invitation
loop educator inserts a new character in the search bar
alt educator updates the search criteria
Logged educator->WebApplication:searchEducator(educatorName: String)
WebApplication->InformationProvider:searchEducator(educatorName: String)
InformationProvider->UserInformation:searchEducator(educatorName: String)
UserInformation->DatabaseService:searchEducator(educatorName: String)
DatabaseService->DataBase:searchEducator(educatorName: String)
DataBase-->DatabaseService:educatorList: List<Educator>
DatabaseService-->UserInformation:educatorList: List<Educator>
UserInformation-->InformationProvider:educatorList: List<Educator>
InformationProvider-->WebApplication:educatorList: List<Educator>
WebApplication->WebApplication:toJson(educatorList: List<Educator>)
WebApplication-->Logged educator:educatorList: JSON


else educator finds the user he was looking for
Logged educator->WebApplication:inviteForCollaboration(username: String)
WebApplication->EducatorManager:inviteForCollaboration(username: String)
EducatorManager->TournamentManager:inviteForCollaboration(username: String)
TournamentManager->DatabaseService:inviteForCollaboration(username: String)
DatabaseService->DataBase:inviteForCollaboration(username: String)
DataBase-->DatabaseService: result: boolean, educator: Educator
DatabaseService-->TournamentManager:result: boolean, educator: Educator
TournamentManager-->EducatorManager:result: boolean, educator: Educator

alt !result
EducatorManager-->WebApplication:result: boolean
WebApplication-->Logged educator:already a collaborator error
else result
EducatorManager->NotificationService:inviteForCollaboration(educator: Educator)
NotificationService->MailService: inviteForCollaboration(educator: Educator)
MailService-->NotificationService: result: boolean
NotificationService-->EducatorManager: result: boolean
EducatorManager-->WebApplication: result: boolean
alt !result
WebApplication-->Logged educator: errorPage
else result
WebApplication-->Logged educator: successful invitation message
end
end


end

end
end
end


