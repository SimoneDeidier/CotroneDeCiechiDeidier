title Educator signs up

frame Educator signs up

actor Educator
participant Web Application
participant Registration Service
participant InstitutionalMailService
participant Database Service
participant e-Mail Service
participant Database
participant ClearbitAPI

Educator->Web Application:openApplication()
Educator<--Web Application: loginPage

Educator->Web Application:clickOnSignUp()
Educator<--Web Application: SignUpPage

loop while registration ends
Educator->Web Application:submit(name:String,surname:String,\nemail:String, username:String, psw:String)


Web Application->Registration Service:SignUpRequest(name:String,surname:String,\nemail:String, username:String, psw:String)


alt check:Boolean
Web Application<--Registration Service: check:Boolean
Educator<--Web Application:alertSignUpFailed
else
Registration Service->InstitutionalMailService: checkInstitutional(email:String)
InstitutionalMailService->ClearbitAPI:checkInstitutional(email:String)
InstitutionalMailService<--ClearbitAPI:result:Boolean
Registration Service<--InstitutionalMailService:result:Boolean
alt result==true
Registration Service->Database Service: newUser(name:String,surname:String,\nemail:String, username:String, psw:String)
Database Service->Database: InsertUser(name:String,surname:String,\nemail:String, username:String, psw:String)
Database Service<--Database:success: Boolean
Registration Service<--Database Service:success:Boolean
alt success==false
Web Application<--Registration Service:success:Boolean
Educator<--Web Application:alertSignUpFailed
else success==true
Registration Service->e-Mail Service:sendEmail(email:String,text:String)
Registration Service<--e-Mail Service: confirmation:Boolean
Registration Service->Web Application: confResult(confirmation:Boolean)
alt confirmation==false
Educator<--Web Application: alertConfFailed
else confirmation==true
Educator<--Web Application: loginPage
end

end
else result==false
Web Application<--Registration Service:result:Boolean
Educator<--Web Application:NotInstitutionalError
end
end

end

